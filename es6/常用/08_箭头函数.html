<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>06_箭头函数</title>

</head>
<body>
    <button id="btn1">测试箭头函数this_1</button>
    <button id="btn2">测试箭头函数this_2</button>


<!--
* 作用: 定义匿名函数
* 基本语法:
  * 没有参数: () => console.log('xxxx')
  * 一个参数: i => i+2
  * 大于一个参数: (i,j) => i+j
  * 函数体不用大括号: 默认返回结果
  * 函数体如果有多个语句, 需要用{}包围，若有需要返回的内容，需要手动返回
* 使用场景: 多用来定义回调函数

* 箭头函数的特点：
    1、简洁
    2、箭头函数没有自己的this，箭头函数的this不是调用的时候决定的，而是在定义的时候处在的对象就是它的this
    3、扩展理解： 箭头函数的this看外层的是否有函数，
        如果有，外层函数的this就是内部箭头函数的this，
        如果没有，则this是window。
-->
<script type="text/javascript">
  
  function fn1(x, y) {

  }
  const fn2 = function () {

  }

  const foo = () => {}
  console.log(foo.prototype);
  console.log(foo.__proto__);

  //当形参只有一个的时候，可以省略()
  const foo1 = x => {return 123}
  const foo2 = () => {}
  const foo3 = (x, y, z) => {}
  console.log(foo1());  // undefined  123
  //当函数中语句只有一条，可以省略{}，将这条语法结果作为箭头函数的返回值返回
  const foo4 = x => 456;
  const foo5 = () => {console.log(79);console.log(79);}
  console.log(foo4());

  //希望今后函数能用一行代码表示

  //this指向
  const foo6 = () => console.log(this);
  foo6(); //window

  const obj = {foo6};
  obj.foo6();  //window

  foo6.call(obj);  //window
  // new foo6();  //箭头函数不能new调用

  const foo7 = function () {
    console.log(this);
    const foo8 = () => console.log(this);
    foo8();
  }

  foo7(); //window  window
  foo7.call(obj); // obj  obj

  const foo9 = function () {
    console.log(this); //window
    foo10.call(obj);
    function foo10() {
      console.log(this);  //obj
      const foo11 = () => console.log(this); //obj
      foo11();
    }
  }

  foo9();
  //总结： 箭头的函数this指向：与离他最近的一层包裹它的函数的this一致，箭头函数没有自己的this，如果没有函数就是window
  /*
    foo()  window
    obj.foo()  obj
    foo.call(obj)  obj
    new foo()  实例对象
    箭头函数的this  与离他最近的一层包裹它的函数的this一致，箭头函数没有自己的this，如果没有函数就是window
   */




</script>

</body>
</html>